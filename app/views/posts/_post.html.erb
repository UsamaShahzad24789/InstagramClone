<div class="post" id="onePost-<%=post.id%>">
  <%=post.caption%>
  <%=post.location%>
  <div>
    <%if post.image.representable?%>
      <%=image_tag post.image.representation(resize_to_limit: [400, 400]), class:"img", id:"oneImg" ,:"data-postId"=>post.id%>
    <%end%>
  </div>
  <div>
    <%=link_to "Likes: #{post.likes_count}",post_likes_path(post),data:{turbo_frame: "likes"},class:"btn btn primary"%>
  <%=link_to "Comments: #{post.comment_count}",post_comments_path(post),data:{turbo_frame: "postComments"},class:"btn btn primary"%>
  <%=link_to "Archive Post",archives_archive_post_post_path(post),class:"btn btn-outline-danger"%>
  </div>
</div>
<style>
  .post
  {
    padding: 20px;
  }
</style>
<script>
      var myModal = document.getElementById('exampleModal')
      a=document.getElementsByClassName("img")
      myModal.hidden= true
      Object.keys(a).forEach((x)=>{a[x].addEventListener('click',(e)=>{
          myModal.hidden= false
          console.log(a[x])
          b=a[x].dataset.postid
          console.log(myModal)
          document.getElementById("ModalPostId").innerHTML=b
          //on delete btn click
          const btn=document.getElementById("deleteBtn")
          btn.addEventListener('click',()=>{
            $.ajax({
                  url: '/posts/destroy',
                  method: 'DELETE',
                  data: {post_id: b},
            })
          })
      })})
      window.onclick = function(event) {
          if (event.target.id != "exampleModal" && event.target.id != "oneImg") {
                myModal.hidden= true
          }
        }
  </script>
